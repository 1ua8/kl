<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nine Men's Morris - Online Multiplayer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #6366f1;
      --primary-dark: #4f46e5;
      --secondary: #f59e0b;
      --light: #f1f5f9;
      --dark: #1e293b;
      --player1: #f0f9ff;
      --player1-dark: #0369a1;
      --player2: #fef3c7;
      --player2-dark: #b45309;
      --online: #10b981;
      --offline: #ef4444;
      --away: #f59e0b;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #e0e7ff 0%, #fae8ff 100%);
      min-height: 100vh;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }

    .title-font {
      font-family: 'Playfair Display', serif;
    }

    .player1-piece {
      fill: url(#player1-gradient);
      stroke: var(--player1-dark);
      stroke-width: 3;
      filter: drop-shadow(0 4px 3px rgb(0 0 0 / 0.1));
    }

    .player2-piece {
      fill: url(#player2-gradient);
      stroke: var(--player2-dark);
      stroke-width: 3;
      filter: drop-shadow(0 4px 3px rgb(0 0 0 / 0.1));
    }

    .selected-piece {
      stroke: var(--primary);
      stroke-width: 4;
      filter: drop-shadow(0 0 8px rgba(99, 102, 241, 0.7));
    }

    .valid-move-hint {
      fill: var(--primary);
      opacity: 0.4;
      pointer-events: none;
    }

    .removable-piece {
      cursor: pointer;
      animation: pulse 1.5s infinite;
    }

    .board-point {
      cursor: pointer;
      fill: #cbd5e1;
      transition: all 0.2s ease;
    }

    .board-point:hover {
      fill: #94a3b8;
      transform: scale(1.1);
    }

    .board-line {
      stroke: #94a3b8;
      stroke-width: 6;
      stroke-linecap: round;
    }

    .timer {
      transition: all 0.3s ease;
    }

    .timer-warning {
      color: #ef4444;
      animation: pulse 1s infinite;
    }

    .game-container {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.5);
    }

    .online-status {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-right: 8px;
    }

    .online {
      background-color: var(--online);
    }

    .offline {
      background-color: var(--offline);
    }

    .away {
      background-color: var(--away);
    }

    .chat-message {
      animation: fadeIn 0.3s ease-in;
    }

    @keyframes pulse {
      0% {
        opacity: 1;
      }

      50% {
        opacity: 0.7;
      }

      100% {
        opacity: 1;
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes celebrate {
      0% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.05);
      }

      100% {
        transform: scale(1);
      }
    }

    .fade-in {
      animation: fadeIn 0.5s ease-out;
    }

    .celebrate {
      animation: celebrate 0.5s ease-in-out 3;
    }

    .tooltip {
      position: relative;
    }

    .tooltip:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      padding: 5px 10px;
      background: var(--dark);
      color: white;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
      z-index: 100;
    }

    /* Scrollbar styling */
    .contacts-list::-webkit-scrollbar {
      width: 6px;
    }

    .contacts-list::-webkit-scrollbar-track {
      background: #f1f5f9;
      border-radius: 3px;
    }

    .contacts-list::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 3px;
    }

    .contacts-list::-webkit-scrollbar-thumb:hover {
      background: #94a3b8;
    }
  </style>
</head>

<body class="flex flex-col items-center justify-center min-h-screen p-4 py-8">
  <div class="game-container w-full max-w-6xl mx-auto rounded-2xl shadow-2xl overflow-hidden p-4 sm:p-8">
    <header class="text-center mb-6">
      <h1 class="title-font text-3xl sm:text-4xl font-bold text-slate-800 mb-2">Nine Men's Morris</h1>
      <p class="text-slate-600">Play online with friends and contacts</p>
    </header>

    <!-- Online Multiplayer Section -->
    <div class="bg-white/80 rounded-xl p-4 shadow-md mb-6">
      <h2 class="text-lg font-semibold text-slate-800 mb-4"><i class="fas fa-globe mr-2 text-blue-500"></i>Online Multiplayer</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="bg-blue-50 rounded-lg p-4">
          <h3 class="font-medium text-slate-800 mb-2"><i class="fas fa-plus-circle mr-2 text-blue-600"></i>Create Game</h3>
          <p class="text-sm text-slate-600 mb-3">Create a new game and invite friends</p>
          <button id="create-room-btn" class="bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-2 px-4 rounded-lg transition-colors w-full">
            Create Game Room
          </button>
        </div>

        <div class="bg-amber-50 rounded-lg p-4">
          <h3 class="font-medium text-slate-800 mb-2"><i class="fas fa-sign-in-alt mr-2 text-amber-600"></i>Join Game</h3>
          <p class="text-sm text-slate-600 mb-3">Join with a game code</p>
          <div class="flex">
            <input type="text" id="room-code-input" placeholder="Enter code" class="flex-1 py-2 px-3 border border-slate-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            <button id="join-room-btn" class="bg-amber-600 hover:bg-amber-700 text-white font-medium py-2 px-4 rounded-r-lg transition-colors">
              Join
            </button>
          </div>
        </div>
      </div>

      <div id="room-info" class="hidden mt-4 p-4 bg-slate-100 rounded-lg">
        <div class="flex justify-between items-center mb-2">
          <h3 class="font-medium text-slate-800">Game Room: <span id="room-id" class="font-mono bg-white px-2 py-1 rounded">ABCD12</span></h3>
          <button id="copy-room-code" class="text-slate-600 hover:text-slate-800">
            <i class="fas fa-copy"></i> Copy
          </button>
        </div>
        <p class="text-sm text-slate-600 mb-3">Share this code with friends to play together</p>
        <div class="flex flex-wrap gap-2">
          <button id="invite-friends-btn" class="bg-green-600 hover:bg-green-700 text-white text-sm font-medium py-1.5 px-3 rounded transition-colors">
            <i class="fas fa-user-plus mr-1"></i> Invite Friends
          </button>
          <button id="start-game-btn" class="bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-1.5 px-3 rounded transition-colors hidden">
            <i class="fas fa-play mr-1"></i> Start Game
          </button>
          <button id="leave-room-btn" class="bg-slate-600 hover:bg-slate-700 text-white text-sm font-medium py-1.5 px-3 rounded transition-colors">
            <i class="fas fa-sign-out-alt mr-1"></i> Leave
          </button>
        </div>
      </div>
    </div>

    <div class="flex flex-col lg:flex-row gap-6">
      <!-- Left Column: Game Settings and Info -->
      <div class="w-full lg:w-1/3 space-y-6">
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <div class="flex-1 bg-white/80 rounded-xl p-4 shadow-md">
            <label for="gameMode" class="block text-sm font-medium text-slate-700 mb-1"><i class="fas fa-user-group mr-2"></i>Game Mode</label>
            <select id="gameMode" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white/50">
              <option value="pvc">Computer</option>
              <option value="pvp">Player 2 (Local)</option>
              <option value="online" selected>Online Multiplayer</option>
            </select>
          </div>
          <div id="difficulty-container" class="flex-1 bg-white/80 rounded-xl p-4 shadow-md">
            <label for="difficulty" class="block text-sm font-medium text-slate-700 mb-1"><i class="fas fa-brain mr-2"></i>Difficulty</label>
            <select id="difficulty" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white/50">
              <option value="1">Simple</option>
              <option value="2">Challenging</option>
              <option value="3">Difficult</option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-1 gap-6">
          <div id="player1-panel" class="p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl shadow-md border-2 border-blue-400">
            <div class="flex justify-between items-start">
              <div>
                <h2 class="font-bold text-slate-900 text-lg"><i class="fas fa-user mr-2 text-blue-600"></i>Player 1 (White)</h2>
                <p class="text-sm text-slate-700 mt-2"><span class="font-semibold">Pieces in hand:</span> <span id="p1-hand" class="font-bold text-blue-700">9</span></p>
                <p class="text-sm text-slate-700"><span class="font-semibold">Pieces on board:</span> <span id="p1-board" class="font-bold text-blue-700">0</span></p>
              </div>
              <div class="text-right">
                <div class="timer text-sm font-mono bg-white/80 px-2 py-1 rounded" id="p1-timer">02:00</div>
              </div>
            </div>
          </div>
          <div id="player2-panel" class="p-4 bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl shadow-md border-2 border-transparent">
            <div class="flex justify-between items-start">
              <div>
                <h2 id="player2-label" class="font-bold text-slate-900 text-lg"><i class="fas fa-robot mr-2 text-amber-600"></i>Computer (Black)</h2>
                <p class="text-sm text-slate-700 mt-2"><span class="font-semibold">Pieces in hand:</span> <span id="p2-hand" class="font-bold text-amber-700">9</span></p>
                <p class="text-sm text-slate-700"><span class="font-semibold">Pieces on board:</span> <span id="p2-board" class="font-bold text-amber-700">0</span></p>
              </div>
              <div class="text-right">
                <div class="timer text-sm font-mono bg-white/80 px-2 py-1 rounded" id="p2-timer">02:00</div>
              </div>
            </div>
          </div>
        </div>

        <div id="message-box" class="min-h-[60px] bg-white/80 rounded-xl text-center flex items-center justify-center p-3 shadow-md fade-in">
          <p id="message" class="text-lg font-semibold text-slate-800"><i class="fas fa-info-circle mr-2 text-blue-500"></i>Select a game mode to start</p>
        </div>

        <div class="flex justify-center items-center gap-4 mt-4">
          <button id="new-game-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl flex items-center gap-2">
            <i class="fas fa-play-circle"></i> New Game
          </button>
          <button id="sound-toggle-btn" class="p-3 bg-slate-700 hover:bg-slate-800 text-white rounded-xl transition-colors shadow-lg hover:shadow-xl tooltip" data-tooltip="Toggle Sound" aria-label="Toggle Sound">
            <i class="fas fa-volume-up"></i>
          </button>
          <button id="help-btn" class="p-3 bg-slate-700 hover:bg-slate-800 text-white rounded-xl transition-colors shadow-lg hover:shadow-xl tooltip" data-tooltip="Show Help" aria-label="Show Help">
            <i class="fas fa-question"></i>
          </button>
        </div>
      </div>

      <!-- Center Column: Game Board -->
      <div class="w-full lg:w-1/3 flex flex-col items-center">
        <div class="aspect-square w-full max-w-md mx-auto relative">
          <svg id="game-board" viewBox="0 0 700 700" class="w-full h-full">
            <defs>
              <linearGradient id="player1-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#e0f2fe" />
                <stop offset="100%" stop-color="#bae6fd" />
              </linearGradient>
              <linearGradient id="player2-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#fef3c7" />
                <stop offset="100%" stop-color="#fde68a" />
              </linearGradient>
              <linearGradient id="board-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#c7d2fe" />
                <stop offset="100%" stop-color="#ddd6fe" />
              </linearGradient>
            </defs>
            <rect width="100%" height="100%" fill="url(#board-gradient)" rx="10" ry="10" />
          </svg>
          <div class="absolute bottom-4 left-0 right-0 flex justify-center gap-2">
            <div class="bg-black/70 text-white text-xs px-3 py-1 rounded-full">Right-click to rotate board</div>
          </div>
        </div>
      </div>

      <!-- Right Column: Contacts and Chat -->
      <div class="w-full lg:w-1/3 space-y-6">
        <div class="bg-white/80 rounded-xl p-4 shadow-md">
          <h2 class="text-lg font-semibold text-slate-800 mb-4"><i class="fas fa-users mr-2 text-blue-500"></i>Online Friends</h2>

          <div class="contacts-list max-h-60 overflow-y-auto pr-2">
            <div class="flex items-center justify-between p-3 rounded-lg hover:bg-slate-100 cursor-pointer">
              <div class="flex items-center">
                <span class="online-status online"></span>
                <span class="font-medium">Ahmed Mohamed</span>
              </div>
              <button class="text-blue-600 hover:text-blue-800 text-sm">
                <i class="fas fa-gamepad"></i> Invite
              </button>
            </div>

            <div class="flex items-center justify-between p-3 rounded-lg hover:bg-slate-100 cursor-pointer">
              <div class="flex items-center">
                <span class="online-status away"></span>
                <span class="font-medium">Sara Ali</span>
              </div>
              <button class="text-blue-600 hover:text-blue-800 text-sm">
                <i class="fas fa-gamepad"></i> Invite
              </button>
            </div>

            <div class="flex items-center justify-between p-3 rounded-lg hover:bg-slate-100 cursor-pointer">
              <div class="flex items-center">
                <span class="online-status online"></span>
                <span class="font-medium">Omar Khaled</span>
              </div>
              <button class="text-blue-600 hover:text-blue-800 text-sm">
                <i class="fas fa-gamepad"></i> Invite
              </button>
            </div>

            <div class="flex items-center justify-between p-3 rounded-lg hover:bg-slate-100 cursor-pointer">
              <div class="flex items-center">
                <span class="online-status offline"></span>
                <span class="font-medium">Layla Hassan</span>
              </div>
              <button class="text-blue-600 hover:text-blue-800 text-sm" disabled>
                <i class="fas fa-gamepad"></i> Invite
              </button>
            </div>
          </div>

          <div class="mt-4 pt-4 border-t border-slate-200">
            <h3 class="text-sm font-medium text-slate-700 mb-2">Invite via link</h3>
            <div class="flex">
              <input type="text" id="invite-link" value="https://morris-game.com/join/ABCD12" class="flex-1 py-2 px-3 border border-slate-300 rounded-l-lg text-xs" readonly>
              <button id="copy-invite-link" class="bg-slate-700 hover:bg-slate-800 text-white py-2 px-3 rounded-r-lg text-sm">
                <i class="fas fa-copy"></i>
              </button>
            </div>
          </div>
        </div>

        <div class="bg-white/80 rounded-xl p-4 shadow-md">
          <h2 class="text-lg font-semibold text-slate-800 mb-4"><i class="fas fa-comments mr-2 text-blue-500"></i>Game Chat</h2>

          <div id="chat-messages" class="max-h-40 overflow-y-auto mb-3 space-y-2 pr-2">
            <div class="chat-message bg-slate-100 p-2 rounded-lg">
              <span class="font-medium text-blue-600">System:</span> Welcome to the game!
            </div>
          </div>

          <div class="flex">
            <input type="text" id="chat-input" placeholder="Type a message..." class="flex-1 py-2 px-3 border border-slate-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            <button id="send-message" class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-r-lg">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Help Modal -->
  <div id="help-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden fade-in">
    <div class="bg-white rounded-xl p-6 max-w-md mx-4 shadow-2xl">
      <h2 class="text-xl font-bold mb-4 text-slate-800"><i class="fas fa-book-open mr-2 text-blue-500"></i>How to Play</h2>
      <ul class="space-y-3">
        <li class="flex items-start">
          <div class="bg-blue-100 p-1 rounded-full mr-3 mt-1"><i class="fas fa-circle-plus text-blue-600 text-xs"></i></div> <span>Place your 9 pieces on board intersections</span>
        </li>
        <li class="flex items-start">
          <div class="bg-blue-100 p-1 rounded-full mr-3 mt-1"><i class="fas fa-bars-staggered text-blue-600 text-xs"></i></div> <span>Form mills (3 in a row) to remove opponent pieces</span>
        </li>
        <li class="flex items-start">
          <div class="bg-blue-100 p-1 rounded-full mr-3 mt-1"><i class="fas fa-ban text-blue-600 text-xs"></i></div> <span>You can't remove pieces from opponent's mills unless no other pieces available</span>
        </li>
        <li class="flex items-start">
          <div class="bg-blue-100 p-1 rounded-full mr-3 mt-1"><i class="fas fa-dove text-blue-600 text-xs"></i></div> <span>When down to 3 pieces, you can "fly" to any empty spot</span>
        </li>
        <li class="flex items-start">
          <div class="bg-blue-100 p-1 rounded-full mr-3 mt-1"><i class="fas fa-trophy text-blue-600 text-xs"></i></div> <span>Win by reducing opponent to 2 pieces or blocking all moves</span>
        </li>
      </ul>
      <button id="close-help" class="mt-6 bg-blue-600 hover:bg-blue-700 text-white px-5 py-2.5 rounded-xl w-full transition-colors">Got it!</button>
    </div>
  </div>

  <script>
    /**
     * SoundManager for a web-based game.
     * Handles loading, playing, and toggling sound effects and background music.
     * Generated on: Monday, September 1, 2025.
     */
    class SoundManager {
      constructor(config) {
        this.sounds = {
          place: new Audio(config.sounds.place),
          move: new Audio(config.sounds.move),
          mill: new Audio(config.sounds.mill),
          remove: new Audio(config.sounds.remove),
        };
        this.music = new Audio(config.music.track);
        this.music.loop = true; // Ensure the music loops
        this.music.volume = config.music.volume || 0.3; // Set a lower volume for background music
        this.isMuted = true; // Start muted until the user interacts
        this.musicStarted = false;
        // UI elements for the mute button
        this.toggleButton = document.getElementById(config.toggleButtonId);
        this.soundOnIcon = `<i class="fas fa-volume-up"></i>`;
        this.soundOffIcon = `<i class="fas fa-volume-mute"></i>`;
        this._updateButtonVisuals();
        this.toggleButton.addEventListener('click', () => this.toggleMute());
        // Preload sounds
        Object.values(this.sounds).forEach(sound => {
          sound.preload = 'auto';
          sound.load();
        });
        this.music.preload = 'auto';
        this.music.load();
      }
      // Private helper to play a sound effect if not muted
      _playSoundEffect(sound) {
        if (!this.isMuted) {
          sound.currentTime = 0; // Rewind to play again if triggered quickly
          sound.play().catch(error => console.error("Error playing sound effect:", error));
        }
      }
      // --- Public Methods to be called from your game logic ---
      playPlace() {
        this._playSoundEffect(this.sounds.place);
      }
      playMove() {
        this._playSoundEffect(this.sounds.move);
      }
      playMill() {
        this._playSoundEffect(this.sounds.mill);
      }
      playRemove() {
        this._playSoundEffect(this.sounds.remove);
      }
      // --- Music and Mute Controls ---
      toggleMute() {
        this.isMuted = !this.isMuted;
        if (this.isMuted) {
          this.music.pause();
        } else {
          // Start music only if it hasn't been started before,
          // respecting browser autoplay policies.
          if (!this.musicStarted) {
            this.music.play().catch(error => console.error("Music autoplay was blocked:", error));
            this.musicStarted = true;
          } else {
            this.music.play();
          }
        }
        this._updateButtonVisuals();
      }
      _updateButtonVisuals() {
        if (this.isMuted) {
          this.toggleButton.innerHTML = this.soundOffIcon;
          this.toggleButton.setAttribute('aria-label', 'Unmute sound');
        } else {
          this.toggleButton.innerHTML = this.soundOnIcon;
          this.toggleButton.setAttribute('aria-label', 'Mute sound');
        }
      }
    }
    // --- Create an instance of the SoundManager ---
    const soundManager = new SoundManager({
      toggleButtonId: 'sound-toggle-btn',
      sounds: {
        place: 'https://cdn.pixabay.com/audio/2022/03/15/audio_133a1a129e.mp3', // Soft wood click
        move: 'https://cdn.pixabay.com/audio/2022/03/15/audio_133a1a129e.mp3', // Same as place
        mill: 'https://cdn.pixabay.com/audio/2022/11/22/audio_2c5a2a5002.mp3', // Positive chime
        remove: 'https://cdn.pixabay.com/audio/2021/08/04/audio_a898a1b32a.mp3' // Quick whoosh
      },
      music: {
        track: 'https://cdn.pixabay.com/audio/2022/08/17/audio_eb7213872c.mp3', // Calm, medieval background loop
        volume: 0.3
      }
    });
    // --- Game Constants ---
    const PLAYER1 = 1;
    const PLAYER2 = 2;
    const EMPTY = 0;
    const TOTAL_PIECES = 9;
    // --- Board Geometry ---
    const pointsCoords = [{
        x: 50,
        y: 50
      }, {
        x: 350,
        y: 50
      }, {
        x: 650,
        y: 50
      }, {
        x: 150,
        y: 150
      }, {
        x: 350,
        y: 150
      }, {
        x: 550,
        y: 150
      },
      {
        x: 250,
        y: 250
      }, {
        x: 350,
        y: 250
      }, {
        x: 450,
        y: 250
      }, {
        x: 50,
        y: 350
      }, {
        x: 150,
        y: 350
      }, {
        x: 250,
        y: 350
      },
      {
        x: 450,
        y: 350
      }, {
        x: 550,
        y: 350
      }, {
        x: 650,
        y: 350
      }, {
        x: 250,
        y: 450
      }, {
        x: 350,
        y: 450
      }, {
        x: 450,
        y: 450
      },
      {
        x: 150,
        y: 550
      }, {
        x: 350,
        y: 550
      }, {
        x: 550,
        y: 550
      }, {
        x: 50,
        y: 650
      }, {
        x: 350,
        y: 650
      }, {
        x: 650,
        y: 650
      }
    ];
    const boardLines = [
      [0, 1],
      [1, 2],
      [2, 14],
      [14, 23],
      [23, 22],
      [22, 21],
      [21, 9],
      [9, 0],
      [3, 4],
      [4, 5],
      [5, 13],
      [13, 20],
      [20, 19],
      [19, 18],
      [18, 10],
      [10, 3],
      [6, 7],
      [7, 8],
      [8, 12],
      [12, 17],
      [17, 16],
      [16, 15],
      [15, 11],
      [11, 6],
      [1, 4],
      [7, 16],
      [22, 19],
      [10, 11]
    ];
    const mills = [
      [0, 1, 2],
      [3, 4, 5],
      [6, 7, 8],
      [9, 10, 11],
      [12, 13, 14],
      [15, 16, 17],
      [18, 19, 20],
      [21, 22, 23],
      [0, 9, 21],
      [3, 10, 18],
      [6, 11, 15],
      [1, 4, 7],
      [16, 19, 22],
      [8, 12, 17],
      [5, 13, 20],
      [2, 14, 23]
    ];
    const adjacencies = {
      0: [1, 9],
      1: [0, 2, 4],
      2: [1, 14],
      3: [4, 10],
      4: [1, 3, 5, 7],
      5: [4, 13],
      6: [7, 11],
      7: [4, 6, 8],
      8: [7, 12],
      9: [0, 10, 21],
      10: [3, 9, 11, 18],
      11: [6, 10, 15],
      12: [8, 13, 17],
      13: [5, 12, 14, 20],
      14: [2, 13, 23],
      15: [11, 16],
      16: [7, 15, 17, 19],
      17: [12, 16],
      18: [10, 19],
      19: [16, 18, 20, 22],
      20: [13, 19],
      21: [9, 22],
      22: [19, 21, 23],
      23: [14, 22]
    };
    // --- DOM Elements ---
    const boardSVG = document.getElementById('game-board');
    const messageEl = document.getElementById('message');
    const newGameBtn = document.getElementById('new-game-btn');
    const p1HandEl = document.getElementById('p1-hand');
    const p1BoardEl = document.getElementById('p1-board');
    const p2HandEl = document.getElementById('p2-hand');
    const p2BoardEl = document.getElementById('p2-board');
    const player1Panel = document.getElementById('player1-panel');
    const player2Panel = document.getElementById('player2-panel');
    const gameModeSelect = document.getElementById('gameMode');
    const difficultySelect = document.getElementById('difficulty');
    const difficultyContainer = document.getElementById('difficulty-container');
    const player2Label = document.getElementById('player2-label');
    const helpBtn = document.getElementById('help-btn');
    const helpModal = document.getElementById('help-modal');
    const closeHelp = document.getElementById('close-help');
    // Online multiplayer elements
    const createRoomBtn = document.getElementById('create-room-btn');
    const joinRoomBtn = document.getElementById('join-room-btn');
    const roomCodeInput = document.getElementById('room-code-input');
    const roomInfo = document.getElementById('room-info');
    const roomId = document.getElementById('room-id');
    const copyRoomCode = document.getElementById('copy-room-code');
    const inviteFriendsBtn = document.getElementById('invite-friends-btn');
    const startGameBtn = document.getElementById('start-game-btn');
    const leaveRoomBtn = document.getElementById('leave-room-btn');
    const inviteLink = document.getElementById('invite-link');
    const copyInviteLink = document.getElementById('copy-invite-link');
    const chatMessages = document.getElementById('chat-messages');
    const chatInput = document.getElementById('chat-input');
    const sendMessageBtn = document.getElementById('send-message');
    // --- Game State Variables ---
    let boardState, currentPlayer, gamePhase, p1PiecesInHand, p2PiecesInHand, p1PiecesOnBoard, p2PiecesOnBoard;
    let selectedPieceIndex, isRemovingPiece, gameOver, gameMode, difficultyLevel;
    let boardElements = {
      lines: [],
      points: [],
      pieces: []
    };
    // Online multiplayer state
    let roomCode = null;
    let isHost = false;
    let players = {};
    let playerId = 'player-' + Math.floor(Math.random() * 1000);
    let playerName = 'Player_' + Math.floor(Math.random() * 1000);
    // --- Game Logic Functions ---
    function initGame() {
      boardState = Array(24).fill(EMPTY);
      currentPlayer = PLAYER1;
      gamePhase = 1;
      p1PiecesInHand = TOTAL_PIECES;
      p2PiecesInHand = TOTAL_PIECES;
      p1PiecesOnBoard = 0;
      p2PiecesOnBoard = 0;
      selectedPieceIndex = -1;
      isRemovingPiece = false;
      gameOver = false;
      gameMode = gameModeSelect.value;
      difficultyLevel = parseInt(difficultySelect.value);
      // Clear previous board elements
      boardElements.lines = [];
      boardElements.points = [];
      boardElements.pieces = [];
      updateUI();
      drawBoard();
      // Reset online multiplayer if not in online mode
      if (gameMode !== 'online') {
        resetOnlineMultiplayer();
      }
    }

    function drawBoard() {
      // Clear only the pieces and hints, keep the board lines
      if (boardElements.lines.length === 0) {
        // Draw board lines only once
        boardLines.forEach(line => {
          const [start, end] = line;
          const p1 = pointsCoords[start];
          const p2 = pointsCoords[end];
          const lineEl = document.createElementNS('http://www.w3.org/2000/svg', 'line');
          lineEl.setAttribute('x1', p1.x);
          lineEl.setAttribute('y1', p1.y);
          lineEl.setAttribute('x2', p2.x);
          lineEl.setAttribute('y2', p2.y);
          lineEl.setAttribute('stroke', '#94a3b8');
          lineEl.setAttribute('stroke-width', '5');
          lineEl.classList.add('board-line');
          boardSVG.appendChild(lineEl);
          boardElements.lines.push(lineEl);
        });
      }
      // Clear previous points and pieces
      boardElements.points.forEach(point => point.remove());
      boardElements.pieces.forEach(piece => piece.remove());
      boardElements.points = [];
      boardElements.pieces = [];
      // Draw board points
      pointsCoords.forEach((coord, i) => {
        const point = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        point.setAttribute('cx', coord.x);
        point.setAttribute('cy', coord.y);
        point.setAttribute('r', '20');
        point.classList.add('board-point');
        point.dataset.index = i;
        boardSVG.appendChild(point);
        boardElements.points.push(point);
        // Draw pieces if present
        if (boardState[i] !== EMPTY) {
          const piece = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
          piece.setAttribute('cx', coord.x);
          piece.setAttribute('cy', coord.y);
          piece.setAttribute('r', '25');
          piece.classList.add(boardState[i] === PLAYER1 ? 'player1-piece' : 'player2-piece');
          piece.classList.add('fade-in');
          piece.dataset.index = i;
          if (isRemovingPiece && boardState[i] !== currentPlayer && isRemovable(i)) {
            piece.classList.add('removable-piece');
          }
          if (selectedPieceIndex === i) {
            piece.classList.add('selected-piece');
          }
          boardSVG.appendChild(piece);
          boardElements.pieces.push(piece);
        }
      });
      // Draw valid move hints if a piece is selected
      if (selectedPieceIndex !== -1) {
        getValidMoves(selectedPieceIndex, boardState, p1PiecesOnBoard, p2PiecesOnBoard).forEach(moveIndex => {
          const coord = pointsCoords[moveIndex];
          const hint = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
          hint.setAttribute('cx', coord.x);
          hint.setAttribute('cy', coord.y);
          hint.setAttribute('r', '20');
          hint.classList.add('valid-move-hint');
          boardSVG.appendChild(hint);
          boardElements.pieces.push(hint);
        });
      }
    }

    function handleBoardClick(index) {
      if (gameOver || (gameMode === 'pvc' && currentPlayer === PLAYER2)) return;
      if (isRemovingPiece) {
        handleRemovePiece(index);
        return;
      }
      if (gamePhase === 1) {
        handlePlacePiece(index);
      } else {
        handleMovePiece(index);
      }
    }

    function handlePlacePiece(index) {
      if (boardState[index] !== EMPTY) return;
      soundManager.playPlace();
      boardState[index] = currentPlayer;
      if (currentPlayer === PLAYER1) {
        p1PiecesInHand--;
        p1PiecesOnBoard++;
      } else {
        p2PiecesInHand--;
        p2PiecesOnBoard++;
      }
      if (checkForMill(index, boardState, currentPlayer)) {
        soundManager.playMill();
        isRemovingPiece = true;
        updateUI();
        drawBoard();
      } else {
        switchPlayer();
      }
    }

    function handleMovePiece(index) {
      if (selectedPieceIndex === -1) {
        if (boardState[index] === currentPlayer) {
          selectedPieceIndex = index;
          drawBoard();
        }
      } else {
        const validMoves = getValidMoves(selectedPieceIndex, boardState, p1PiecesOnBoard, p2PiecesOnBoard);
        if (validMoves.includes(index)) {
          soundManager.playMove();
          boardState[index] = currentPlayer;
          boardState[selectedPieceIndex] = EMPTY;
          selectedPieceIndex = -1;
          if (checkForMill(index, boardState, currentPlayer)) {
            soundManager.playMill();
            isRemovingPiece = true;
            updateUI();
            drawBoard();
          } else {
            if (checkForWin()) return;
            switchPlayer();
          }
        } else {
          selectedPieceIndex = -1;
          if (boardState[index] === currentPlayer) {
            selectedPieceIndex = index;
          }
          drawBoard();
        }
      }
    }

    function handleRemovePiece(index) {
      if (boardState[index] !== EMPTY && boardState[index] !== currentPlayer && isRemovable(index)) {
        soundManager.playRemove();
        boardState[index] = EMPTY;
        if (currentPlayer === PLAYER1) {
          p2PiecesOnBoard--;
        } else {
          p1PiecesOnBoard--;
        }
        isRemovingPiece = false;
        if (checkForWin()) return;
        switchPlayer();
      }
    }

    function checkForMill(index, board, player) {
      return mills.some(mill => mill.includes(index) && mill.every(pos => board[pos] === player));
    }

    function isPieceInMill(index, board) {
      if (board[index] === EMPTY) return false;
      const pieceOwner = board[index];
      return mills.some(mill => mill.includes(index) && mill.every(pos => board[pos] === pieceOwner));
    }

    function isRemovable(index) {
      const opponent = currentPlayer === PLAYER1 ? PLAYER2 : PLAYER1;
      if (boardState[index] !== opponent) return false;
      const opponentPieces = boardState.map((p, i) => p === opponent ? i : -1).filter(i => i !== -1);
      const nonMillPieces = opponentPieces.filter(i => !isPieceInMill(i, boardState));
      return nonMillPieces.length > 0 ? nonMillPieces.includes(index) : true;
    }

    function switchPlayer() {
      updateGamePhase();
      currentPlayer = (currentPlayer === PLAYER1) ? PLAYER2 : PLAYER1;
      updateUI();
      drawBoard();
      if (gameMode === 'pvc' && currentPlayer === PLAYER2 && !gameOver) {
        setTimeout(computerMove, 500);
      }
    }

    function updateGamePhase() {
      if (gamePhase === 1 && p1PiecesInHand === 0 && p2PiecesInHand === 0) {
        gamePhase = 2;
      }
    }

    function getValidMoves(index, board, p1Count, p2Count) {
      const pieceOwner = board[index];
      const isFlying = (pieceOwner === PLAYER1 && p1Count === 3) || (pieceOwner === PLAYER2 && p2Count === 3);
      if (isFlying) {
        return board.map((val, i) => val === EMPTY ? i : -1).filter(i => i !== -1);
      } else {
        return adjacencies[index].filter(pos => board[pos] === EMPTY);
      }
    }

    function checkForWin() {
      const opponent = currentPlayer === PLAYER1 ? PLAYER2 : PLAYER1;
      const opponentPieceCount = opponent === PLAYER1 ? p1PiecesOnBoard : p2PiecesOnBoard;
      if (gamePhase >= 2 && opponentPieceCount < 3) {
        endGame(currentPlayer);
        return true;
      }
      if (gamePhase >= 2) {
        const opponentPiecesOnBoard = boardState.map((p, i) => p === opponent ? i : -1).filter(i => i !== -1);
        if (opponentPiecesOnBoard.length > 0) {
          const opponentHasMoves = opponentPiecesOnBoard.some(i => getValidMoves(i, boardState, p1PiecesOnBoard, p2PiecesOnBoard).length > 0);
          if (!opponentHasMoves) {
            endGame(currentPlayer);
            return true;
          }
        }
      }
      return false;
    }

    function endGame(winner) {
      gameOver = true;
      messageEl.textContent = `${winner === PLAYER1 ? 'Player 1' : (gameMode === 'pvc' ? 'Computer' : 'Player 2')} wins!`;
      messageEl.classList.add('celebrate');
      // إضافة تأثير الفوز للوحة
      document.getElementById('game-board').classList.add('celebrate');
      newGameBtn.classList.add('animate-pulse');
      boardSVG.classList.add('disabled');
    }

    function updateUI() {
      p1HandEl.textContent = p1PiecesInHand;
      p1BoardEl.textContent = p1PiecesOnBoard;
      p2HandEl.textContent = p2PiecesInHand;
      p2BoardEl.textContent = p2PiecesOnBoard;
      player1Panel.classList.toggle('pulsing-border', currentPlayer === PLAYER1 && !gameOver);
      player1Panel.classList.toggle('border-transparent', currentPlayer !== PLAYER1 || gameOver);
      player2Panel.classList.toggle('pulsing-border', currentPlayer === PLAYER2 && !gameOver);
      player2Panel.classList.toggle('border-transparent', currentPlayer !== PLAYER2 || gameOver);
      if (gameOver) return;
      let phaseText = gamePhase === 1 ? 'place a piece' : 'move a piece';
      let turnName = currentPlayer === PLAYER1 ? 'Player 1' : (gameMode === 'pvc' ? 'Computer' : 'Player 2');
      if (isRemovingPiece) {
        messageEl.textContent = `${turnName}, you formed a mill! Remove an opponent's piece.`;
      } else {
        messageEl.textContent = `${turnName}'s turn to ${phaseText}.`;
      }
      newGameBtn.classList.remove('animate-pulse');
      boardSVG.classList.remove('disabled');
    }
    // --- AI Logic ---
    function computerMove() {
      messageEl.textContent = 'Computer is thinking...';
      boardSVG.classList.add('disabled');
      let millFormed = false;
      if (gamePhase === 1) {
        const placement = findBestPlacement();
        boardState[placement.index] = PLAYER2;
        soundManager.playPlace();
        p2PiecesInHand--;
        p2PiecesOnBoard++;
        millFormed = checkForMill(placement.index, boardState, PLAYER2);
      } else {
        const move = findBestMove();
        if (move) {
          boardState[move.to] = PLAYER2;
          boardState[move.from] = EMPTY;
          soundManager.playMove();
          millFormed = checkForMill(move.to, boardState, PLAYER2);
        } else {
          endGame(PLAYER1);
          return;
        }
      }
      if (millFormed) {
        soundManager.playMill();
        isRemovingPiece = true;
        const removal = findBestRemoval();
        if (removal && removal.index !== undefined) {
          soundManager.playRemove();
          boardState[removal.index] = EMPTY;
          p1PiecesOnBoard--;
        }
        isRemovingPiece = false;
      }
      if (checkForWin()) return;
      switchPlayer();
    }

    function findBestPlacement() {
      const emptySpots = boardState.map((p, i) => p === EMPTY ? i : -1).filter(i => i !== -1);
      if (difficultyLevel === 1) {
        return {
          index: emptySpots[Math.floor(Math.random() * emptySpots.length)]
        };
      }
      // Try to complete a mill
      for (const index of emptySpots) {
        const tempBoard = [...boardState];
        tempBoard[index] = PLAYER2;
        if (checkForMill(index, tempBoard, PLAYER2)) return {
          index
        };
      }
      // Block opponent mills
      for (const index of emptySpots) {
        const tempBoard = [...boardState];
        tempBoard[index] = PLAYER1;
        if (checkForMill(index, tempBoard, PLAYER1)) return {
          index
        };
      }
      // Create two in a row
      for (const index of emptySpots) {
        if (createsTwoInARow(index, PLAYER2, boardState)) return {
          index
        };
      }
      // Prefer center and strategic positions
      const strategicPositions = [4, 7, 10, 13, 16, 19];
      const strategicSpots = emptySpots.filter(i => strategicPositions.includes(i));
      if (strategicSpots.length > 0) {
        return {
          index: strategicSpots[Math.floor(Math.random() * strategicSpots.length)]
        };
      }
      return {
        index: emptySpots[Math.floor(Math.random() * emptySpots.length)]
      };
    }

    function findBestMove() {
      const myPieces = boardState.map((p, i) => p === PLAYER2 ? i : -1).filter(i => i !== -1);
      let possibleMoves = [];
      myPieces.forEach(from => {
        const validMoves = getValidMoves(from, boardState, p1PiecesOnBoard, p2PiecesOnBoard);
        validMoves.forEach(to => possibleMoves.push({
          from,
          to
        }));
      });
      if (possibleMoves.length === 0) return null;
      if (difficultyLevel === 1) {
        return possibleMoves[Math.floor(Math.random() * possibleMoves.length)];
      }
      // Try to complete a mill
      for (const move of possibleMoves) {
        const tempBoard = [...boardState];
        tempBoard[move.to] = PLAYER2;
        tempBoard[move.from] = EMPTY;
        if (checkForMill(move.to, tempBoard, PLAYER2)) return move;
      }
      // Block opponent mills
      const opponentPieces = boardState.map((p, i) => p === PLAYER1 ? i : -1).filter(i => i !== -1);
      for (const oppFrom of opponentPieces) {
        const oppValidMoves = getValidMoves(oppFrom, boardState, p1PiecesOnBoard, p2PiecesOnBoard);
        for (const oppTo of oppValidMoves) {
          const tempBoard = [...boardState];
          tempBoard[oppTo] = PLAYER1;
          tempBoard[oppFrom] = EMPTY;
          if (checkForMill(oppTo, tempBoard, PLAYER1)) {
            const blockingMove = possibleMoves.find(m => m.to === oppTo);
            if (blockingMove) return blockingMove;
          }
        }
      }
      // Create two in a row
      for (const move of possibleMoves) {
        const tempBoard = [...boardState];
        tempBoard[move.to] = PLAYER2;
        tempBoard[move.from] = EMPTY;
        if (createsTwoInARow(move.to, PLAYER2, tempBoard)) return move;
      }
      return possibleMoves[Math.floor(Math.random() * possibleMoves.length)];
    }

    function findBestRemoval() {
      const removablePieces = boardState.map((p, i) => (p === PLAYER1 && isRemovable(i)) ? i : -1).filter(i => i !== -1);
      if (removablePieces.length === 0) return null;
      if (difficultyLevel === 1) {
        return {
          index: removablePieces[Math.floor(Math.random() * removablePieces.length)]
        };
      }
      // Remove pieces that are part of potential mills
      for (const index of removablePieces) {
        if (isPieceInMill(index, boardState)) {
          return {
            index
          };
        }
      }
      // Remove pieces that create two in a row
      for (const index of removablePieces) {
        if (createsTwoInARow(index, PLAYER1, boardState)) {
          return {
            index
          };
        }
      }
      return {
        index: removablePieces[Math.floor(Math.random() * removablePieces.length)]
      };
    }

    function createsTwoInARow(index, player, board) {
      return mills.some(mill => {
        if (!mill.includes(index)) return false;
        const otherPieces = mill.filter(p => p !== index);
        const p1 = otherPieces[0];
        const p2 = otherPieces[1];
        return (board[p1] === player && board[p2] === EMPTY) || (board[p2] === player && board[p1] === EMPTY);
      });
    }
    // --- Online Multiplayer Functions ---
    function createRoom() {
      // Generate a random room code
      roomCode = generateRoomCode();
      roomId.textContent = roomCode;
      roomInfo.classList.remove('hidden');
      isHost = true;
      // Update invite link
      inviteLink.value = `https://morris-game.com/join/${roomCode}`;
      // Add yourself as a player
      players[playerId] = {
        id: playerId,
        name: playerName,
        isHost: true
      };
      // Update UI
      messageEl.innerHTML = `<i class="fas fa-users mr-2 text-blue-500"></i>Room created. Share the code: ${roomCode}`;
      startGameBtn.classList.remove('hidden');
      // Add system message to chat
      addChatMessage('System', 'Room created. Waiting for players to join...');
    }

    function joinRoom() {
      const code = roomCodeInput.value.trim().toUpperCase();
      if (code.length !== 6) {
        alert('Please enter a valid 6-character room code');
        return;
      }
      roomCode = code;
      roomId.textContent = roomCode;
      roomInfo.classList.remove('hidden');
      isHost = false;
      // Update invite link
      inviteLink.value = `https://morris-game.com/join/${roomCode}`;
      // Update UI
      messageEl.innerHTML = `<i class="fas fa-users mr-2 text-blue-500"></i>Joined room: ${roomCode}. Waiting for host to start...`;
      startGameBtn.classList.add('hidden');
      // Add system message to chat
      addChatMessage('System', `Joined room ${roomCode}. Waiting for game to start...`);
    }

    function leaveRoom() {
      roomCode = null;
      roomInfo.classList.add('hidden');
      isHost = false;
      players = {};
      // Update UI
      messageEl.innerHTML = `<i class="fas fa-info-circle mr-2 text-blue-500"></i>Select a game mode to start`;
      // Add system message to chat
      addChatMessage('System', 'Left the room');
    }

    function generateRoomCode() {
      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      let result = '';
      for (let i = 0; i < 6; i++) {
        result += characters.charAt(Math.floor(Math.random() * characters.length));
      }
      return result;
    }

    function resetOnlineMultiplayer() {
      roomCode = null;
      roomInfo.classList.add('hidden');
      isHost = false;
      players = {};
    }

    function addChatMessage(sender, message) {
      const messageEl = document.createElement('div');
      messageEl.classList.add('chat-message', 'bg-slate-100', 'p-2', 'rounded-lg');
      messageEl.innerHTML = `<span class="font-medium text-blue-600">${sender}:</span> ${message}`;
      chatMessages.appendChild(messageEl);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function sendChatMessage() {
      const message = chatInput.value.trim();
      if (message) {
        addChatMessage('You', message);
        chatInput.value = '';
        // In a real implementation, you would send this message to other players
      }
    }
    // --- Event Listeners ---
    boardSVG.addEventListener('click', (e) => {
      const target = e.target;
      if (target.dataset.index) {
        handleBoardClick(parseInt(target.dataset.index));
      }
    });
    newGameBtn.addEventListener('click', initGame);
    gameModeSelect.addEventListener('change', (e) => {
      difficultyContainer.style.display = e.target.value === 'pvc' ? 'block' : 'none';
      player2Label.textContent = e.target.value === 'pvc' ? 'Computer (Black)' : 'Player 2 (Black)';
      player2Label.innerHTML = e.target.value === 'pvc' ? '<i class="fas fa-robot mr-2 text-amber-600"></i>Computer (Black)' : '<i class="fas fa-user mr-2 text-amber-600"></i>Player 2 (Black)';
      initGame();
    });
    difficultySelect.addEventListener('change', initGame);
    helpBtn.addEventListener('click', () => {
      helpModal.classList.remove('hidden');
    });
    closeHelp.addEventListener('click', () => {
      helpModal.classList.add('hidden');
    });
    // Online multiplayer event listeners
    createRoomBtn.addEventListener('click', createRoom);
    joinRoomBtn.addEventListener('click', joinRoom);
    leaveRoomBtn.addEventListener('click', leaveRoom);
    copyRoomCode.addEventListener('click', () => {
      navigator.clipboard.writeText(roomCode);
      copyRoomCode.innerHTML = '<i class="fas fa-check"></i> Copied!';
      setTimeout(() => {
        copyRoomCode.innerHTML = '<i class="fas fa-copy"></i> Copy';
      }, 2000);
    });
    copyInviteLink.addEventListener('click', () => {
      navigator.clipboard.writeText(inviteLink.value);
      copyInviteLink.innerHTML = '<i class="fas fa-check"></i>';
      setTimeout(() => {
        copyInviteLink.innerHTML = '<i class="fas fa-copy"></i>';
      }, 2000);
    });
    sendMessageBtn.addEventListener('click', sendChatMessage);
    chatInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        sendChatMessage();
      }
    });
    // إضافة إمكانية التدوير بالنقر بزر الماوس الأيمن
    boardSVG.addEventListener('contextmenu', (e) => {
      e.preventDefault();
      const rotation = boardSVG.style.transform === 'rotate(180deg)' ? 'rotate(0deg)' : 'rotate(180deg)';
      boardSVG.style.transform = rotation;
    });
    // --- Initial Game Start ---
    initGame();
    // Add sample chat messages
    setTimeout(() => {
      addChatMessage('System', 'Welcome to Nine Men\'s Morris Online!');
      addChatMessage('System', 'Create a room or join one to start playing with friends');
    }, 1000);
  </script>
</body>

</html>